<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vintage64 | Personal Vault</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        [data-theme="light"] .highlight-green { color: #008000 !important; text-shadow: none !important; }
        .older-log { display: none; }
        .vault-nav-container { display: flex; flex-direction: column; align-items: center; gap: 20px; margin-bottom: 35px; }
        .secondary-row { display: flex; align-items: center; gap: 15px; flex-wrap: wrap; justify-content: center; }
        .secondary-filters { display: flex; gap: 10px; }
        .review-label { font-family: 'Courier New', Courier, monospace; font-weight: bold; font-size: 0.9em; color: var(--accent); text-shadow: 0 0 8px var(--accent); letter-spacing: 2px; animation: neonPulse 1.5s infinite; }
        @keyframes neonPulse { 0%, 100% { opacity: 1; text-shadow: 0 0 12px var(--accent); } 50% { opacity: 0.3; text-shadow: 0 0 2px var(--accent); } }
        .submit-btn.active { background-color: var(--accent) !important; color: #000 !important; box-shadow: 0 0 15px var(--accent); border: 1px solid #fff; }
        
        /* ALIGNED COLORFUL BROADCAST UI */
        .broadcast-tools { 
            margin-top: 40px; 
            padding: 15px 25px; 
            border: 1px solid var(--border); 
            background: rgba(0,0,0,0.3); 
            border-top: 2px solid var(--accent);
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 25px;
            flex-wrap: wrap;
        }
        .share-label { 
            font-size: 0.8em; 
            color: var(--accent); 
            font-weight: bold; 
            letter-spacing: 1px;
            margin-right: 5px;
        }
        .share-icons { 
            display: flex; 
            align-items: center; 
            gap: 20px; 
        }
        .share-icons a { 
            display: flex;
            align-items: center;
            transition: 0.3s ease;
            text-decoration: none;
            height: 24px; /* Force consistent row height */
        }
        .share-icons img {
            width: 24px;
            height: 24px;
            filter: drop-shadow(0 0 2px rgba(255,255,255,0.1));
            display: block;
        }
        /* THE ALIGNMENT FIX FOR THE LINK ICON */
        .share-icons i {
            font-size: 18px; /* Slightly smaller to match visual weight of logos */
            color: var(--accent);
            text-shadow: 0 0 5px var(--accent);
            display: inline-block;
            transform: translateY(1px); /* Pulls it down into alignment with images */
        }
        .share-icons a:hover { 
            transform: translateY(-3px); 
            filter: drop-shadow(0 0 8px var(--accent));
        }
    </style>
</head>

<body id="personal-identity">    
    <div class="container">
        <main class="vault-layout">
            <section class="log-display">
                <article id="content" class="blog-post">
                    <p class="blink">> ESTABLISHING_UPLINK...</p>
                </article>
            </section>
        </main>
    </div>

    <script>
        const repo = "kdbush64-create/otd-vault";
        // Function to handle link copying
        function copyUplink() {
            const dummy = document.createElement("textarea");
            document.body.appendChild(dummy);
            dummy.value = window.location.href;
            dummy.select();
            document.execCommand("copy");
            document.body.removeChild(dummy);
            alert('UPLINK_COPIED_TO_CLIPBOARD');
        }

        async function loadPost(filePath, isManualClick = false) {
            const contentArea = document.getElementById('content');
            // ... (Fetching logic remains same)

            try {
                const response = await fetch(`https://raw.githubusercontent.com/${repo}/main/${filePath}`);
                const text = await response.text();
                // ... (Markdown parsing logic remains same)

                const shareUrl = encodeURIComponent(window.location.href);
                const shareText = encodeURIComponent("New review uplinked from the Observation Deck: ");
                
                // NEW BROADCAST HTML WITH NEXTDOOR AND ALIGNED LINK
                const broadcastHtml = `
                    <div class="blog-post">${marked.parse(text)}</div>
                    <div class="broadcast-tools">
                        <span class="share-label">SHARE_TO ></span>
                        <div class="share-icons">
                            <a href="https://twitter.com/intent/tweet?text=${shareText}&url=${shareUrl}" target="_blank" title="X">
                                <img src="https://cdn.simpleicons.org/x/white" alt="X">
                            </a>
                            <a href="https://www.facebook.com/sharer/sharer.php?u=${shareUrl}" target="_blank" title="Facebook">
                                <img src="https://cdn.simpleicons.org/facebook/1877F2" alt="Facebook">
                            </a>
                            <a href="https://www.instagram.com/" target="_blank" title="Instagram" onclick="copyUplink()">
                                <img src="https://cdn.simpleicons.org/instagram/E4405F" alt="Instagram">
                            </a>
                            <a href="https://nextdoor.com/share/url/?url=${shareUrl}" target="_blank" title="Nextdoor">
                                <img src="https://cdn.simpleicons.org/nextdoor/00B246" alt="Nextdoor">
                            </a>
                            <a href="javascript:void(0)" onclick="copyUplink()" title="Copy Link">
                                <i class="fa-solid fa-link"></i>
                            </a>
                        </div>
                    </div>
                `;

                contentArea.innerHTML = broadcastHtml;
            } catch (err) { console.error(err); }
        }
        // Load default feed
        window.onload = () => { loadPost('rants/example.md'); };
    </script>
</body>
</html>
